<!DOCTYPE html><html lang="fr"><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0" name="viewport" /><title>La ruche qui dit oui | Documentation</title><link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon" /><link href="/stylesheets/application-52d176f1.css" rel="stylesheet" /><link href="/stylesheets/editor-b4170f1e.css" rel="stylesheet" /><script src="https://use.fontawesome.com/37d3194b4f.js"></script><script crossorigin="anonymous" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" src="https://code.jquery.com/jquery-2.2.4.min.js"></script></head><body class="documentation documentation_index"><header><nav class="navbar navbar-fixed-top"><div class="navbar-mobile"><a class="navbar-brand hidden-lg-up" href="/"><img src="/images/logo-e3ef2e8d.png" />Le forum</a><button aria-controls="collapsingNavbar" aria-expanded="false" aria-label="Toggle navigation" class="pull-right navbar-toggler hidden-lg-up" data-target="#collapsingNavbar" data-toggle="collapse" type="button">&#9776;</button></div><div class="collapse navbar-toggleable-md" id="collapsingNavbar"><div class="container-fluid"><div class="row"><div class="col-lg-2 hidden-md-down"><a class="navbar-brand" href="/"><img src="/images/logo-e3ef2e8d.png" />Le forum</a><p class="navbar-text"><a href="#"><i class="fa fa-chevron-left"></i> Retour</a></p></div><div class="col-md-5 col-lg-4"><form role="search"><div class="input-group"><div class="input-group-btn input-group-btn-inside input-group-btn-inside-lg"><i class="fa fa-search"></i></div><input class="typeahead form-control form-control-lg form-control-with-icon-left form-control-with-icon-left-lg" placeholder="Rechercher" type="text" /></div></form></div><div class="col-md-5 col-lg-4"><ul class="nav navbar-nav pull-lg-right"><li class="nav-item"><button class="btn btn-primary" type="submit">Créer un sujet</button></li><li class="nav-item"><div class="dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="dropdownMessages"><i class="fa fa-envelope-o"></i><span class="hidden-lg-down"> Messages</span></a><div aria-labelledby="dropdownMessages" class="dropdown-menu dropdown-menu-right"><h6 class="dropdown-header">Vos derniers messages</h6><a class="dropdown-item" href="#"><div class="dropdown-item-content"><img class="img-circle pull-left m-r-1" height="45px" src="http://laruchequiditoui.sebastienbourdu.com/user_avatar/laruchequiditoui.sebastienbourdu.com/ekkans/45/5_1.png" width="45px" /><div class="pushed-content"><strong>Camille Premier </strong><small class="text-muted">il y a 2j</small><div class="text-muted">You can set text wrap to only affect objects…</div></div></div></a><a class="dropdown-item" href="#"><div class="dropdown-item-content"><img class="img-circle pull-left m-r-1" height="45px" src="http://laruchequiditoui.sebastienbourdu.com/user_avatar/laruchequiditoui.sebastienbourdu.com/ekkans/45/5_1.png" width="45px" /><div class="pushed-content"><strong>Camille Premier </strong><small class="text-muted">il y a 2j</small><div class="text-muted">You can set text wrap to only affect objects…</div></div></div></a><a class="dropdown-item read" href="#"><div class="dropdown-item-content"><img class="img-circle pull-left m-r-1" height="45px" src="http://laruchequiditoui.sebastienbourdu.com/user_avatar/laruchequiditoui.sebastienbourdu.com/ekkans/45/5_1.png" width="45px" /><div class="pushed-content"><strong>Camille Premier </strong><small class="text-muted">il y a 2j</small><div class="text-muted">You can set text wrap to only affect objects…</div></div></div></a><div class="dropdown-item"><div class="dropdown-item-content dropdown-item-content-btn"><a class="btn btn-secondary btn-block" href="#">Voir les autres messages</a></div></div></div></div></li><li class="nav-item"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="dropdownMessages"><i class="fa fa-bell-o"></i><span class="hidden-lg-down"> Notifications</span></a><div aria-labelledby="dropdownMessages" class="dropdown-menu dropdown-menu-right"><h6 class="dropdown-header">Notifications</h6><div class="dropdown-item"><div class="dropdown-item-content"><a href="#"><img class="img-circle pull-left m-r-1" height="45px" src="http://laruchequiditoui.sebastienbourdu.com/user_avatar/laruchequiditoui.sebastienbourdu.com/ekkans/45/5_1.png" width="45px" /></a><div class="pushed-content"><a href="#"><strong>Camille Premier</strong> </a><span class="text-muted">a répondu à</span><a href="#"> Faciliter la validation et la clôture des distributions pour les RR</a><div class="small"><i class="fa fa-comment"></i><span class="text-muted"> il y a 2j</span></div></div></div></div><div class="dropdown-item"><div class="dropdown-item-content"><a href="#"><img class="img-circle pull-left m-r-1" height="45px" src="http://laruchequiditoui.sebastienbourdu.com/user_avatar/laruchequiditoui.sebastienbourdu.com/ekkans/45/5_1.png" width="45px" /></a><div class="pushed-content"><a href="#"><strong>Camille Premier</strong> </a><span class="text-muted">a répondu à</span><a href="#"> Faciliter la validation et la clôture des distributions pour les RR</a><div class="small"><i class="fa fa-comment"></i><span class="text-muted"> il y a 2j</span></div></div></div></div><div class="dropdown-item read"><div class="dropdown-item-content"><a href="#"><img class="img-circle pull-left m-r-1" height="45px" src="http://laruchequiditoui.sebastienbourdu.com/user_avatar/laruchequiditoui.sebastienbourdu.com/ekkans/45/5_1.png" width="45px" /></a><div class="pushed-content"><a href="#"><strong>Camille Premier</strong> </a><span class="text-muted">a répondu à</span><a href="#"> Faciliter la validation et la clôture des distributions pour les RR</a><div class="small"><i class="fa fa-comment"></i><span class="text-muted"> il y a 2j</span></div></div></div></div><div class="dropdown-item"><div class="dropdown-item-content dropdown-item-content-btn"><a class="btn btn-secondary btn-block" href="#">Voir toutes les notifications</a></div></div></div></li><li class="nav-item"></li><li class="nav-item"><img class="img-circle" height="42px" src="http://laruchequiditoui.sebastienbourdu.com/user_avatar/laruchequiditoui.sebastienbourdu.com/ekkans/42/5_1.png" width="42px" /></li></ul></div></div></div></div></nav></header><main role="main"><div class="container-fluid"><div class="row"><div class="col-lg-3 col-xl-2 hidden-md-down"><aside><h3><strong><em>Échanger vos idées, partager vos expériences, interroger la communauté</em></strong></h3><button class="btn btn-primary btn-lg" type="submit">Créer un sujet</button><h6 class="text-uppercase"><strong>Les catégories</strong></h6><ul class="list-unstyled"><li><a href="#"><span class="tag tag-default">Distribution</span></a></li><li><a href="#"><span class="tag tag-default">Site</span></a></li><li><a href="#"><span class="tag tag-default">Producteur</span></a></li></ul></aside></div><div class="col-lg-7 col-xl-6"><h1>Documentation</h1>

<p>This plugin has been tested on Discourse version 1.7.0.beta5</p>

<h2>Plugins</h2>

<p>This plugin uses the plugin <em>discourse-topic-previews</em> (0.2) so it&rsquo;s better to install it too</p>

<p>This plugin has been tested with those default plugins: discourse-details (0.4),
discourse-nginx-performance-report (0.1), docker_manager (0.1), lazyYT (1.0.1),
poll (0.9).</p>

<h2>Configuration</h2>

<p>1 - Go to /admin/site_settings/category/basic</p>

<p>And change default values for:</p>

<ul>
<li><p><em>top menu</em> = &ldquo;latest|new|unread|top|-[category]&rdquo;</p></li>
<li><p><em>post menu</em> = &ldquo;reply|like-count|like|share|flag|edit|bookmark|delete|admin&rdquo;</p></li>
<li><p><em>enable mobile theme</em> = disabled</p></li>
</ul>

<p>2 - Go to /admin/site_settings/category/uncategorized</p>

<ul>
<li><p><em>version checks</em> = disabled</p></li>
<li><p><em>new version emails</em> = disabled</p></li>
</ul>

<p>The new versions have to be tested first in the staging environment</p>

<p>3 - Go to /admin/site_settings/category/tags</p>

<p>And change default values for:</p>

<ul>
<li><p><em>tagging enabled</em> = enabled</p></li>
<li><p><em>tag style</em> = box</p></li>
</ul>

<p>4 - Go to /admin/site_settings/category/plugins</p>

<ul>
<li><p><em>topic list thumbnails</em> = enabled</p></li>
<li><p><em>topic list excerpts</em> = enabled</p></li>
<li><p><em>topic list actions</em> = enabled</p></li>
<li><p><em>topic list show like on current users posts</em> = enabled</p></li>
<li><p><em>topic list excerpt length</em> = 200</p></li>
<li><p><em>lrqdo enabled</em> = enabled</p></li>
</ul>

<h2>Installation using docker</h2>
<pre class="highlight plaintext"><code>cd /var/discourse
vi container/app.yml
</code></pre>
<p>Add the following to your app.yml in the plugins section:</p>
<pre class="highlight plaintext"><code>hooks:
  after_code:
    - exec:
        cd: $home/plugins
        cmd:
          - mkdir -p plugins
          - git clone https://github.com/ekkans/lrqdo-plugin-discourse.git
</code></pre>
<p>and rebuild docker via</p>
<pre class="highlight plaintext"><code>./launcher rebuild app
</code></pre>
<h2>Post-install customization</h2>

<p>The following customization is needed because a plugin can&rsquo;t override the file desktop.css</p>

<p>Go to /admin/customize/css_html/</p>

<p>Click on new</p>

<p>Add the following code in the css tab:</p>
<pre class="highlight css"><code><span class="k">@import</span> <span class="s1">"vendor/font_awesome/font-awesome"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"vendor/pikaday"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/foundation/helpers"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"vendor/select2"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/foundation/mixins"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/foundation/variables"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/components/badges"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/components/banner"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/components/date-picker"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/components/hashtag"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/components/keyboard_shortcuts"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/components/navs"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/input_tip"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/topic-entrance"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/printer-friendly"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/topic-list"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/about"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/activation"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/bbcode"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/cat_reorder"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/code_highlighting"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/colorpicker"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/combobox"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/compose"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/composer-user-selector"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/directory"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/discourse"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/ember-select"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/emoji"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/exception"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/faqs"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/history"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/lightbox"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/login"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/magnific-popup"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/menu-panel"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/mobile"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/modal"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/notification-options"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/onebox"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/request_access"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/rtl"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/search"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/share_link"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/tagging"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/topic"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/topic-admin-menu"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/topic-post"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/upload"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/user"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/user-badges"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/base/username_tagsinput"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/d-editor"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"common/topic-timeline"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/banner"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/compose"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/login"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/modal"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/user-card"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/category-list"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/topic-list"</span><span class="p">;</span>
<span class="nc">.posts</span> <span class="p">{</span>
    <span class="err">@import</span> <span class="err">"desktop/topic-post";</span>
<span class="p">}</span>
<span class="k">@import</span> <span class="s1">"desktop/topic"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/upload"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/user"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/history"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"desktop/menu-panel"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"plugins"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"plugins_desktop"</span><span class="p">;</span>
<span class="k">@import</span> <span class="s1">"category_backgrounds"</span><span class="p">;</span>
</code></pre>
<p>Save</p>

<p>Click on the preview button</p>

<p>On the new page, go to the console and copy the result of $(&rsquo;.custom-css&rsquo;).attr(&lsquo;href&rsquo;)</p>

<p>Then add the following code in the head tab and don&rsquo;t forget to paste in cssUrl the value you just copied</p>
<pre class="highlight plaintext"><code>&lt;script type="text/discourse-plugin" version="0.4"&gt;
  api.onPageChange((url) =&gt; {
    var cssUrl = undefined; // replace undefined by the value of $('.custom-css').attr('href')

    if(url.substring(0, 6) == '/admin') {
      $('head').append('&lt;link href="' + cssUrl + '" rel="stylesheet" /&gt;');
    }

    $("[href^='/stylesheets/desktop']").remove();
  });
&lt;/script&gt;
</code></pre>
<p>Save</p>

<p>Enable the customization</p>
</div><div class="col-xl-2"></div></div></div></main><div class="hide" id="editor"><div class="editor-header"><div class="container-fluid"><div class="row"><div class="col-md-2"><a class="editor-header-text" href="#"><i class="fa fa-chevron-left"></i> Retour</a></div><div class="col-md-6"><h2>Créer un sujet</h2></div></div></div></div><div class="editor-body"><h1 class="editable"></h1><div class="editor-body-textarea"><textarea class="editable" cols="50" rows="4"></textarea></div><pre class="markdown-container invisble"></pre></div><div class="editor-footer"><div class="container-fluid"><div class="row"><div class="col-md-5 offset-md-2"><button class="btn btn-primary">Poster</button><select class="form-control"><option>Sélectionner une rubrique</option></select></div><div class="col-md-3"><div class="pull-right form-check"><label class="form-check-label"><input class="form-check-input" name="markdown" type="checkbox" /> Markdown</label></div></div></div></div></div></div><script src="/javascripts/application-c138cf09.js"></script><script src="/javascripts/editor-vendor-e8dfca3a.js"></script><script src="/javascripts/editor-0beac8c8.js"></script></body></html>